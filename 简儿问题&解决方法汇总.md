# 简儿问题 & 解决方法汇总

这里汇总了简儿 QQ 机器人的常见问题和解决方法，帮助您快速排查和解决使用过程中遇到的问题。

## 常见问题

### 1. (已过时) Lagrange.OneBot 登录失败，提示 Signer Server returned a 521

> ⚠️ **警告**：自简儿 NEXT 3.1 起，Lagrange.OneBot 协议端已被官方废弃，所有关于 Lagrange 的教程和配置文件（如 `appsettings.json`）均已不再维护。
实际Lagrange官方抛弃了Onebot协议，改开发Langrange.Milky（LagrangeV2），但是Jianer开发者不愿意兼容Milky，如果您有能力，可以尝试兼容Milky）

这是由于 Lagrange.OneBot 官方关闭了签名服务器导致的。

**解决方案：**

- **推荐方案**：请全体用户迁移至 [NapCatQQ](/NapCatQQ使用教程) 作为唯一的推荐协议端。
- **替代方案（不推荐）**：如果您执意要临时使用 Lagrange，可以打开旧版的 `appsettings.json`，将 `SignServerUrl` 临时改为：

```
https://sign.ae3803.icu/api/sign/41857/
```

::: tip
如果提示 code 45，请尝试将 `41857` 改成 `42941` 临时登录，之后再改回来。
:::

### 2. `python main.py` 报错：SyntaxError: f-string: unmatched '['

请检查 Python 版本是否满足要求：

```shell
python --version
```

简儿 NEXT 3 要求 **Python 3.12+**，f-string 的嵌套语法在较低版本中不被支持。

### 3. pip 安装依赖失败或网络超时

**解决方案**：使用国内镜像源安装：

```shell
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 4. AI 回复功能不工作

请逐步检查：

1. **API Key 是否已正确填写** — 查看 `config.json` 中的对应字段
2. **OpenAI 库版本是否满足要求** — 执行 `pip show openai`，确认版本 >= 1.60.2


### 5. 协议端与简儿连接失败

请确认：
- `config.json` 中的 `Connection.port` 与协议端配置的端口一致
- `config.json` 中的 `Connection.host` 与协议端配置的地址一致
- 协议端已经成功启动并完成登录
- 防火墙未阻止本地通信

## 问题收集表

我们维护了一个在线的问题与帮助收集表，您可以在这里查看更多常见问题及其解决方案：

🔗 [问题与帮助收集表](https://docs.qq.com/sheet/DZEh0aGtHWXBYdm1E?tab=BB08J2)

## 如何反馈问题

如果您在使用过程中遇到了上述未列出的问题，欢迎通过以下方式反馈：

1. **GitHub Issue**：[提交新 Issue](https://github.com/SRInternet-Studio/Jianer_QQ_bot/issues/new)
2. **电子邮件**：发送至 `srinternet@qq.com`
3. **在线收集表**：通过问题收集表提交新问题

::: tip 反馈建议
反馈问题时，请带上软件当时的 **截图** 和 **日志信息**，方便我们查看报错详情，加速问题解决。
:::
