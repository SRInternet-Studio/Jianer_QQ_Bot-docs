# å¿«é€Ÿå¼€å§‹

::: tip ç‰ˆæœ¬è¯´æ˜Ž
æœ¬æ–‡æ¡£åŸºäºŽ **ç®€å„¿ NEXT 3**ï¼ˆ`NEXT-PREVIEW` åˆ†æ”¯ï¼‰ç¼–å†™ã€‚å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬ï¼ˆç®€å„¿ 2.xï¼‰ï¼Œè¯·å‚è€ƒå¯¹åº”åˆ†æ”¯çš„ READMEã€‚
:::

## çŽ¯å¢ƒè¦æ±‚

ç†è®ºä¸Šå…¨å¹³å°é€šç”¨ã€‚é’ˆå¯¹ä¸åŒçš„å‘è¡Œç‰ˆï¼Œä½ éœ€è¦é€‰æ‹©ä¸åŒçš„ [Python](https://www.python.org) ç‰ˆæœ¬ã€‚

| ç‰ˆæœ¬ | Python è¦æ±‚ | æŽ¨èç‰ˆæœ¬ |
| --- | --- | --- |
| ç®€å„¿ 2 / ç®€å„¿ 3 | Python >= **3.9** | **3.10+** |
| ç®€å„¿ NEXT 3 (å¸¦æœ‰ NEXT å­—æ ·) | Python > **3.11** | **3.12+** |

## éƒ¨ç½²

### 1. å…‹éš†ä»“åº“

å»ºè®®å…ˆ Fork æˆ–ä½¿ç”¨ "Use this template" åˆ›å»ºä½ è‡ªå·±çš„ä»“åº“å‰¯æœ¬ã€‚

```shell
git clone https://github.com/SRInternet-Studio/Jianer_QQ_bot.git
```

å¦‚éœ€ä½¿ç”¨ NEXT 3 é¢„è§ˆç‰ˆï¼Œè¯·åˆ‡æ¢åˆ° `NEXT-PREVIEW` åˆ†æ”¯ï¼š

```shell
cd Jianer_QQ_bot
git checkout NEXT-PREVIEW
```

### 2. å®‰è£…ä¾èµ–

::: warning æ³¨æ„
éƒ¨åˆ†é¢„è§ˆç‰ˆåˆ†æ”¯çš„ `requirements.txt` å¯èƒ½å­˜åœ¨é—æ¼ã€‚å¦‚æžœæŒ‰ç…§ä»¥ä¸‹æ“ä½œå®‰è£…å®ŒæˆåŽä¾ç„¶æ— æ³•ä½¿ç”¨ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®é”™è¯¯ä¿¡æ¯æ‰‹åŠ¨å®‰è£…ç¼ºå¤±çš„ä¾èµ–åº“ã€‚
:::

ä»Žå®˜æ–¹ PyPI å®‰è£…ï¼š
```shell
pip install -r requirements.txt
```

å›½å†…æœåŠ¡å™¨å¯ä½¿ç”¨æ¸…åŽæºæˆ–è€…å…¶ä»–æºåŠ é€Ÿå®‰è£…ï¼š
```shell
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## é…ç½®

### å›¾å½¢åŒ–é…ç½®ï¼ˆæŽ¨èï¼‰

::: tip
éƒ¨åˆ† Preview åˆ†æ”¯å¯èƒ½æ²¡æœ‰è®¾ç½®å‘å¯¼ `SetupWizard.pyw`ï¼ŒDev åˆ†æ”¯æ°¸è¿œä¸ä¼šæœ‰è®¾ç½®å‘å¯¼ã€‚å¦‚æžœä½ çš„åˆ†æ”¯æ–‡ä»¶ä¸­æ²¡æœ‰ `SetupWizard.pyw`ï¼Œè¯·å‰å¾€ [æ‰‹åŠ¨é…ç½®](#æ‰‹åŠ¨é…ç½®) ç« èŠ‚ã€‚
:::

å¯åŠ¨è®¾ç½®å‘å¯¼ï¼š

```shell
python SetupWizard.pyw
```

**æ“ä½œæ­¥éª¤ï¼š**

1. ä¾æ¬¡æ‰“å¼€è®¾ç½®å‘å¯¼ä¸­çš„æ¯ä¸€ä¸ªé¡µé¢ï¼Œå®Œæˆå…¶ä¸­çš„æ¯ä¸€ä¸ªæ¡ç›®
2. æ‰“å¼€ **æ ¸å¯¹å¹¶åº”ç”¨è®¾ç½®** é¡µé¢ï¼Œç‚¹å‡» **åº”ç”¨**
3. çœ‹åˆ°é¡µé¢æ ‡é¢˜æ˜¾ç¤º "å·²æˆåŠŸä¿å­˜" å³è¡¨ç¤ºé…ç½®å®Œæˆ

è‹¥å‡ºçŽ°é”™è¯¯ï¼Œè¯·æµè§ˆä¸‹æ–¹çš„è®¾ç½®å†…å®¹æ–‡æœ¬æ¡†æ‰¾åˆ°æŠ¥é”™è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶æ ¹æ®æç¤ºä¿®æ”¹é…ç½®ã€‚

::: tip Linux ç”¨æˆ·å°è´´å£«
æ²¡æœ‰æ¡Œé¢çŽ¯å¢ƒçš„ Linux ç”¨æˆ·å¯å…ˆåœ¨ Windows ä¸Šå¯åŠ¨é…ç½®ç¨‹åºï¼Œä¿å­˜é…ç½®åŽå°†æ ¹ç›®å½•ä¸‹çš„ `appsettings.json`ã€`config.json` å’Œ `prerequisites.py` å¤åˆ¶åˆ°æœåŠ¡å™¨å³å¯ã€‚
:::

### æ‰‹åŠ¨é…ç½®

#### 1. åè®®ç«¯é…ç½®

::: warning åè®®ç«¯å·²å˜æ›´
ç”±äºŽ Lagrange.OneBot ç­¾åæœåŠ¡å™¨å…³åœï¼Œå®˜æ–¹çŽ° **å¼ºçƒˆæŽ¨èä½¿ç”¨ NapCatQQ** ä½œä¸ºåè®®ç«¯ï¼ˆLagrange å·²è¢«æ ‡è®°ä¸ºè¿‡æ—¶ï¼‰ã€‚

NapCatQQ çš„é…ç½®å®Œå…¨é€šè¿‡å¯è§†åŒ– WebUI è¿›è¡Œï¼Œ**ä¸éœ€è¦**åˆ›å»º `appsettings.json` æ–‡ä»¶ã€‚

ðŸ‘‰ **è¯·å‚é˜… [NapCatQQ ä½¿ç”¨æ•™ç¨‹](/NapCatQQä½¿ç”¨æ•™ç¨‹) å®Œæˆåè®®ç«¯çš„ä¸‹è½½ã€å®‰è£…ä¸Ž WebSocket é€šä¿¡é…ç½®ã€‚**
:::

#### 2. æœºå™¨äººé…ç½®

åˆ›å»ºæˆ–æ‰“å¼€ `config.json` æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼ˆå¦‚æžœå·²æœ‰å†…å®¹åˆ™æ— é¡»å¤åˆ¶ï¼‰ï¼š

```json
{
    "owner": [
      0
    ],
    "black_list": [
    ],
    "silents": [
    ],
    "Connection": {
      "mode": "FWS",
      "host": "127.0.0.1",
      "port": 5004,
      "listener_host": "127.0.0.1",
      "listener_port": 5003,
      "retries": 5,
      "satori_token": ""
    },
    "Log_level": "DEBUG",
    "protocol": "OneBot",
    "Others": {
      "gemini_key": "",
      "openai_key": "",
      "deepseek_key": "",
      "bot_name": "ç®€å„¿" ,
      "bot_name_en": "Jianer",
      "ROOT_User": [""],
      "Auto_approval": [""],
      "reminder": "~",
      "slogan": "ç®€å• å¯çˆ± ä¸ªæ€§ å…¨çŸ¥", 
      "TTS": {"voiceColor": "zh-CN-XiaoyiNeural",
              "rate": "+0%",
              "volume": "+0%",
              "pitch": "+0Hz"
          }, 
      "compliment": ["å•Šï¼è€â€¦â€¦è€å…¬ï¼Œåˆ«æ€Žä¹ˆè¯´å•¦ï¼Œäººâ€¦â€¦äººå®¶å¥½å®³ç¾žçš„å•¦ï¼Œäººå®¶è¿˜ä¼šåŠªåŠ›çš„(*á´—ÍˆË¬á´—Íˆ)ê•¤*.ï¾Ÿ", 
        "å•Š~è€å…¬~ä½ ä¸è¦è¿™ä¹ˆå¤¸äººå®¶å•¦~ã€ƒâˆ€ã€ƒ", 
        "å””â€¦â€¦è°¢â€¦â€¦è°¢è°¢è€å…¬å•¦ðŸ¥°~"]
      },
      "uin": 0
}
```

**é…ç½®é¡¹è¯´æ˜Žï¼š**

| é…ç½®é¡¹ | ç±»åž‹ | è¯´æ˜Ž |
| --- | --- | --- |
| `owner` | æ•´æ•°åˆ—è¡¨ | QQæœºå™¨äººçš„QQå· |
| `black_list` | æ•´æ•°åˆ—è¡¨ | é»‘åå•ï¼Œåˆ—è¡¨ä¸­çš„QQå·å‘é€çš„æ¶ˆæ¯ä¸ä¼šè¢«å¤„ç† |
| `Log_level` | å­—ç¬¦ä¸² | æ—¥å¿—ç­‰çº§ï¼Œå¯é€‰ï¼š`DEBUG`ã€`TRACE`ã€`INFO`ã€`WARNING`ã€`ERROR`ã€`CRITICAL` |
| `Others.gemini_key` | å­—ç¬¦ä¸² | Google Gemini æ¨¡åž‹çš„ API Key |
| `Others.openai_key` | å­—ç¬¦ä¸² | ChatGPT æ¨¡åž‹çš„ API Key |
| `Others.deepseek_key` | å­—ç¬¦ä¸² | DeepSeek æ¨¡åž‹çš„ API Key |
| `Others.bot_name` | å­—ç¬¦ä¸² | æœºå™¨äººçš„ä¸­æ–‡æ˜µç§° |
| `Others.bot_name_en` | å­—ç¬¦ä¸² | æœºå™¨äººçš„è‹±æ–‡æ˜µç§° |
| `Others.ROOT_User` | å­—ç¬¦ä¸²åˆ—è¡¨ | æ ¹ç”¨æˆ·ç»„QQå·ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™ï¼Œ**å¼ºçƒˆå»ºè®®å¡«å†™ä½ çš„QQå·** |
| `Others.Auto_approval` | å­—ç¬¦ä¸²åˆ—è¡¨ | è‡ªåŠ¨å®¡æ‰¹ç­”æ¡ˆåˆ—è¡¨ï¼Œæœºå™¨äººä¸ºç®¡ç†å‘˜æ—¶è‡ªåŠ¨åŒæ„åŒ¹é…çš„åŠ ç¾¤ç”³è¯· |
| `Others.reminder` | å­—ç¬¦ä¸² | è§¦å‘å…³é”®ç¬¦å·/å…³é”®è¯ï¼Œæ¶ˆæ¯ä»¥æ­¤å¼€å¤´æ—¶æœºå™¨äººå“åº” |
| `Others.slogan` | å­—ç¬¦ä¸² | æœºå™¨äººçš„å®£ä¼ æ ‡è¯­ |
| `Others.TTS.voiceColor` | å­—ç¬¦ä¸² | EdgeTTS è¯­éŸ³å›žå¤ä½¿ç”¨çš„éŸ³è‰² |
| `Others.TTS.rate` | å­—ç¬¦ä¸² | EdgeTTS è¯­é€Ÿè®¾å®š |
| `Others.TTS.volume` | å­—ç¬¦ä¸² | EdgeTTS éŸ³é‡è®¾å®š |
| `Others.TTS.pitch` | å­—ç¬¦ä¸² | EdgeTTS éŸ³è°ƒè®¾å®š |
| `Others.compliment` | å­—ç¬¦ä¸²åˆ—è¡¨ | ç”¨æˆ·å¤¸èµžæœºå™¨äººæ—¶çš„"è¿‡æ¿€ååº”"å›žå¤ |

#### 3. å®šæ—¶ç¾¤å‘æ¶ˆæ¯é…ç½®

åˆ›å»ºæˆ–æ‰“å¼€ `timing_message.ini` æ–‡ä»¶ï¼Œå¤åˆ¶ä»¥ä¸‹ç¤ºä¾‹å†…å®¹ï¼š

```ini
11:45âŠ•å„ä½ è¿™ä¸ªç‚¹ä¹Ÿè¯¥åƒäº†å§ï¼Ÿ(â™¡>ð–¥¦<)/â™¥
```

ä»¥ `âŠ•` ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå‰é¢çš„ä¸ºç¾¤å‘æ—¶é—´ï¼ˆ`hh:mm`ï¼‰ï¼ŒåŽé¢çš„ä¸ºç¾¤å‘çš„æ¶ˆæ¯å†…å®¹ã€‚

åˆ›å»ºæˆ–æ‰“å¼€ `blacklist.Sr` æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¡«å†™å®šæ—¶ç¾¤å‘æ¶ˆæ¯å±è”½çš„ç¾¤å·ï¼Œä¸€è¡Œä¸€ä¸ªã€‚

#### 4. æƒé™ç»„ç”¨æˆ·é…ç½®

- åˆ›å»ºæˆ–æ‰“å¼€ `Manage_User.ini` æ–‡ä»¶ï¼Œå¡«å†™æ‹¥æœ‰ `Manage_User` æƒé™çš„ç”¨æˆ·QQå·ï¼Œä¸€è¡Œä¸€ä¸ª
- åˆ›å»ºæˆ–æ‰“å¼€ `Super_User.ini` æ–‡ä»¶ï¼Œå¡«å†™æ‹¥æœ‰ `Super_User` æƒé™çš„ç”¨æˆ·QQå·ï¼Œä¸€è¡Œä¸€ä¸ª

::: tip
å…³äºŽç”¨æˆ·ç»„æƒé™çš„è¯¦ç»†è¯´æ˜Žï¼Œè¯·å‚è€ƒ [é…ç½®ç”¨æˆ·ç»„](/Configure-User-Group)ã€‚
:::

## å¯åŠ¨ä½¿ç”¨

### 1. å¯åŠ¨åè®®ç«¯ (NapCatQQ)

è¯·åŠ¡å¿…å…ˆå¯åŠ¨å¹¶ç™»å½•ä½ çš„ NapCatQQï¼Œå¹¶ç¡®ä¿ WebUI ä¸­çš„ WebSocket æœåŠ¡å™¨é…ç½®æ­£å¸¸è¿è¡Œã€‚

è¯¦è§[NapCatå®˜æ–¹æ–‡æ¡£](https://napneko.github.io/guide/install)(å¦‚æžœæ— æ³•è®¿é—®è¯·æ£€æŸ¥è‡ªå·±çš„ç½‘ç»œçŽ¯å¢ƒ)

ï¼ˆå¦‚æžœä½ è¿˜æ²¡æœ‰éƒ¨ç½² NapCatQQï¼Œè¯· [ç‚¹æ­¤æŸ¥çœ‹æ•™ç¨‹](/NapCatQQä½¿ç”¨æ•™ç¨‹)ï¼‰

### 2. å¯åŠ¨ä¸»ç¨‹åº

**æ–¹å¼ä¸€**ï¼šåœ¨ `SetupWizard.pyw` ä¸­æ‰“å¼€ **æ ¸å¯¹å¹¶åº”ç”¨è®¾ç½®** é¡µé¢ï¼Œç‚¹å‡» **å¯åŠ¨å§ï¼Œæˆ‘çš„ç®€å„¿ï¼**

**æ–¹å¼äºŒ**ï¼šåœ¨ç¨‹åºæ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š
```shell
python main.py
```

çœ‹åˆ° `â„¹ï¸ INFO æˆåŠŸå»ºç«‹è¿žæŽ¥` çš„æ—¥å¿—ï¼Œå³è¡¨æ˜Žä¸Žåè®®ç«¯å¯¹æŽ¥æˆåŠŸã€‚

## å…³äºŽæ—§ç‰ˆ Lagrange.OneBot (å·²è¿‡æ—¶)

::: danger è¿‡æ—¶è­¦å‘Š
åŽ†å²ä¸Šç®€å„¿æ›¾æŽ¨èä½¿ç”¨ Lagrange.OneBotï¼Œä½†ç”±äºŽå®˜æ–¹ç­¾åæœåŠ¡å™¨å…³é—­ï¼ˆæç¤º `Signer Server returned a 521`ï¼‰ï¼Œè¯¥æ–¹æ³•å·²ç»å¤±æ•ˆã€‚æ‰€æœ‰å…³äºŽ Lagrange çš„æ•™ç¨‹å’Œé…ç½®æ–‡ä»¶ï¼ˆå¦‚ `appsettings.json`ï¼‰å‡å·²åºŸå¼ƒã€‚è¯·å…¨ä½“ç”¨æˆ·è¿ç§»è‡³ **NapCatQQ**ã€‚
:::

---

::: warning é‡è¦å£°æ˜Ž
é…ç½®è‡ªå·±çš„ç®€å„¿QQæœºå™¨äººæ—¶ï¼Œ**è¯·å‹¿ä½¿ç”¨ä¸Žå®˜æ–¹ç®€å„¿æœºå™¨äººè´¦å·ç›¸åŒçš„ä¸ªäººä¿¡æ¯**ã€‚ä¸å¾—ä½¿ç”¨"ç®€å„¿"ã€"ç®€å„¿æœºå™¨äºº"ã€"ç®€ â€¢ ä»¥èŽ‰è´èŠ¬"ã€"æ˜¯ç®€å„¿å–"ç­‰å­—æ ·ä½œä¸ºæ˜µç§°ï¼Œä¹Ÿä¸å¾—ä½¿ç”¨å®˜æ–¹å¤´åƒå’Œé¡¹ç›®å›¾æ ‡ä½œä¸ºå¤´åƒã€‚

å®˜æ–¹ç®€å„¿æœºå™¨äººQQå·ï¼š`2399451783`
:::

â„°ð“ƒð’¿â„´ð“Ž It!